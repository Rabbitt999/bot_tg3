#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∑—É–ø–∏–Ω–∫–∏ –±–æ—Ç–∞

echo "üõë –ü–æ—à—É–∫ –ø—Ä–æ—Ü–µ—Å—É –±–æ—Ç–∞..."

# –ó–Ω–∞–π—Ç–∏ PID –ø—Ä–æ—Ü–µ—Å—É –±–æ—Ç–∞
PID=$(ps aux | grep "python.*main.py" | grep -v grep | awk '{print $2}')

if [ -z "$PID" ]; then
    echo "‚úÖ –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π"
else
    echo "üõë –ó—É–ø–∏–Ω–∫–∞ –±–æ—Ç–∞ (PID: $PID)..."
    kill $PID
    sleep 2
    
    # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–æ—Ü–µ—Å –∑—É–ø–∏–Ω–∏–≤—Å—è
    if ps -p $PID > /dev/null 2>&1; then
        echo "‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –∑—É–ø–∏–Ω–∏—Ç–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é SIGKILL..."
        kill -9 $PID
    fi
    
    echo "‚úÖ –ë–æ—Ç –∑—É–ø–∏–Ω–µ–Ω–æ"
fi
