@echo off
chcp 65001 >nul
echo ðŸ”§ Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð° Ð´Ð»Ñ Windows...

REM ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ñ–ÑŽ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
cd /d "%~dp0"

REM Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ñ–ÑŽ Ð´Ð»Ñ Ð»Ð¾Ð³Ñ–Ð²
if not exist "logs" mkdir logs

REM ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ Ð²Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ðµ Ð¾Ñ‚Ð¾Ñ‡ÐµÐ½Ð½Ñ
if exist "venv\Scripts\activate.bat" (
    echo ðŸ”§ ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ñ–Ñ Ð²Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾Ñ‚Ð¾Ñ‡ÐµÐ½Ð½Ñ...
    call venv\Scripts\activate.bat
) else (
    echo âš ï¸ Ð’Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ðµ Ð¾Ñ‚Ð¾Ñ‡ÐµÐ½Ð½Ñ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾
    echo ðŸ“¦ Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚ÐµÐ¹...
    pip install -r requirements.txt
)

REM ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ .env Ñ„Ð°Ð¹Ð»
if not exist ".env" (
    echo âš ï¸ Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾
    if exist ".env.example" (
        echo ðŸ“ Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ .env Ð· Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´Ñƒ...
        copy .env.example .env
        echo âœï¸ Ð’Ñ–Ð´Ñ€ÐµÐ´Ð°Ð³ÑƒÐ¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» .env Ñ‚Ð° Ð·Ð°Ð¿ÑƒÑÑ‚Ñ–Ñ‚ÑŒ Ð±Ð¾Ñ‚Ð° Ð·Ð½Ð¾Ð²Ñƒ
        pause
        exit /b 1
    ) else (
        echo âŒ Ð¤Ð°Ð¹Ð» .env.example Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾
        pause
        exit /b 1
    )
)

echo ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°...
echo ðŸ“ Ð›Ð¾Ð³Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑƒÐ²Ð°Ñ‚Ð¸ÑÑŒ Ð² logs/bot.log
echo ðŸ”´ Ð”Ð»Ñ Ð·ÑƒÐ¿Ð¸Ð½ÐºÐ¸ Ð·Ð°ÐºÑ€Ð¸Ð¹Ñ‚Ðµ Ð²Ñ–ÐºÐ½Ð¾ Ð°Ð±Ð¾ Ð½Ð°Ñ‚Ð¸ÑÐ½Ñ–Ñ‚ÑŒ Ctrl+C

REM Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
python main.py 2>&1 | tee -a logs/bot_console.log

pause
